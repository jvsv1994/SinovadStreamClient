<div class="container">
  <div class="row mt-4">
    <h3>{{parentItem.Name}} :Episodios</h3>
  </div>
  <div class="row mt-4">
    <div class="col-6 d-flex align-itsinovad-center">
      <div class="form-check mb-0">
        <input id="flexCheckDefault" class="form-check-input" #checkbox type="checkbox" (change)="onChangeSelectAllCheckBox($event)">
        <label class="form-check-label" for="flexCheckDefault">
          Todos
        </label>
      </div>
    </div>
    <div class="col-6 text-end">
      <button class="btn me-2" (click)="input.click()">
        <input #input type="file" accept=".txt" (change)="onFileSelected($event)" style="display: none;" />
        <img style="height:40px;" [src]="'upload.png'  | formatDataPipe : 'GetImageURLByKey'" title="Carga Masiva">
      </button>
      <button type="button" class="btn me-2" (click)="showEpisodeRangeForm()">
        <img style="height:40px;" [src]="'rank-number.png'  | formatDataPipe : 'GetImageURLByKey'" title="Agregar por Rango de Números">
      </button>
      <button type="button" class="btn btn-primary" (click)="showItemForm()"><i class="fa-solid fa-circle-plus me-2" aria-hidden="true"></i>Agregar</button>
    </div>
  </div>
  <div class="row mt-4">
    <div class="col-12">
      <table class="table table-bordered">
        <thead>
          <tr>
            <th scope="col">N°</th>
            <th scope="col">Titulo</th>
            <th scope="col">Resumen</th>
            <th scope="col">Acciones</th>
          </tr>
        </thead>
        <tbody>
          <ng-template ngFor let-item [ngForOf]="listItems" let-i="index">
            <tr [ngClass]="{'selected':listSelectedItems.indexOf(item)!=-1}">
              <th role="button" scope="row" (click)="onClickItem($event,item)" (contextmenu)="onContextMenuItem($event,item)">{{getNewIndex(i,response.PageNumber,pageSize)}}</th>
              <td role="button" (click)="onClickItem($event,item)" (contextmenu)="onContextMenuItem($event,item)">{{item.Title}}</td>
              <td role="button" (click)="onClickItem($event,item)" (contextmenu)="onContextMenuItem($event,item)">{{item.Summary}}</td>
              <td>
                <button type="button" class="btn btn-success btn-sm ms-20" data-toggle="tooltip" data-placement="bottom" title="Editar" (click)="editItem(item)">
                  <i class="fa-solid fa-pen-to-square"></i>
                </button>
              </td>
            </tr>
          </ng-template>
        </tbody>
      </table>
    </div>
  </div>
  <div class="row mt-4">
    <div class="col-12">
        <app-pagination *ngIf="response" [responsePagination]="response" (selectPage)="onSelectPage($event)"></app-pagination>
    </div>
  </div>
</div>

<app-episode-form *ngIf="showPopUpForm" [episode]="episode" (close)="showPopUpForm=false" (closeWithChanges)="onSaveEpisode()"></app-episode-form>

<app-episode-range-modal *ngIf="showEpisodeRangeModal" [parent]="parentItem" (close)="showEpisodeRangeModal=false" (closeWithChanges)="onSaveEpisodeRange()"></app-episode-range-modal>

<app-confirm-message-modal *ngIf="showConfirmMessageBox" [message]="'Estas seguro que deseas eliminar estos registros ?'"
(close)="showConfirmMessageBox=false" (confirm)="executeDeleteSelectedItems()"></app-confirm-message-modal>

<app-context-menu #contextMenuPage></app-context-menu>


<!-- <div *ngIf="showChangeSeasonForm" class="sinovad-popup-container">
  <div #content class="sinovad-form-popup-content">
    <div #header class="sinovad-popup-content-header">
      <div (click)="showChangeSeasonForm=false" class="sinovad-back-button-content">
        <img [src]="'back_button_black.png' | formatDataPipe : 'GetImageURLByKey'" width="15px">
      </div>
    </div>
    <div [style.max-height]="content.offsetHeight-header.offsetHeight-footer.offsetHeight+'px'" class="sinovad-form-popup-content-body">
      <div class="sinovad-form-group">
        <h3>Cambiar Temporada</h3>
        <div class="sinovad-form-popup-caption-input-container">
          <div class="sinovad-form-popup-caption-container">
            <span>
              Origen
            </span>
          </div>
          <div class="sinovad-form-popup-input-container">
            {{parentItem.SeasonNumber}}
          </div>
        </div>
        <div class="sinovad-form-popup-caption-input-container">
          <div class="sinovad-form-popup-caption-container">
            <span>
               Destino
            </span>
          </div>
          <div class="sinovad-form-popup-input-container">
            <select name="seasons" id="seasons" (change)="onChangeSeason($event)">
              <ng-template ngFor let-season [ngForOf]="listSeasons"  let-i="index">
                <option value="{{season.Id}}">{{season.SeasonNumber}}</option>
              </ng-template>
            </select>
          </div>
        </div>
      </div>
    </div>
    <div #footer class="sinovad-form-popup-content-footer">
      <div class="sinovad-form-popup-save-button-container">
        <button (click)="saveChangeSeason()">Guardar</button>
      </div>
    </div>
  </div>
</div>
 -->
